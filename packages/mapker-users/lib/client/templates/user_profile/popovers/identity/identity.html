<template name="userProfileIdentityEdition">
  <div class="pull-left user-profile-infos">
    <div id="resource-infos-identity" class="open-identity-edition-popover">
      {{#if eq currentUser._id user._id}}
      <div class="open-identity-edition-popover" id="identity-edit" role="button">
        <span class="icon icon-user-dot"></span>
        <div id="identity">
          <h1>
            <span id="user-name">{{user.profile.fullname}}</span>
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          </h1>

          {{#if user.profile.activity}}
          <span id="user-activity">{{user.profile.activity}}</span>
          {{/if}}
        </div>
      </div>
      {{else}}
      <span class="icon icon-user-dot"></span>
      <div id="identity">
        <h1>
          <span id="user-name">{{user.profile.firstname}} {{user.profile.lastname}}</span>
        </h1>

        {{#if user.profile.activity}}
        <span id="user-activity">{{user.profile.activity}}</span>
        {{/if}}
      </div>
      {{/if}}
    </div>

    {{#if eq currentUser._id user._id}}
    <div class="popover popover-content identity-edition-popover">
      <form id='identity-form'>
    		<div class='row'>
    			<div class='col-md-6'>
    				<div class="form-group {{errorClass 'firstname'}}">
    					<label for='edit-first-name'>First name</label>
    					<input class='form-control' type='text' id='edit-first-name' name='edit-first-name' value='{{user.profile.firstname}}' />
    					<span class='help-block'>{{errorMessage 'firstname'}}</span>
    				</div>
    			</div>
    			<div class='col-md-6'>
    				<div class='form-group {{errorClass 'lastname'}}'>
    					<label for='edit-last-name'>Last name</label>
    					<input class='form-control' type='text' id='edit-last-name' name='edit-last-name' value='{{user.profile.lastname}}' />
    					<span class='help-block'>{{errorMessage 'lastname'}}</span>
    				</div>
    			</div>
    		</div>
    		<div class='form-group {{errorClass "activity"}}'>
    			<label for='edit-activity'>Your main activity</label>
    			<input class='form-control' type='text' id='edit-activity' name="edit-activity" value='{{user.profile.activity}}'>
    			<span class='help-block'>{{errorMessage 'activity'}}</span>
    		</div>
    		<button type='button' class='btn btn-default close-identity-edition-popover'>Cancel</button>
        <button type='submit' class='btn btn-primary submit-identity-form'>
          <span>Save</span>
          {{> loader}}
        </button>
    	</form>
    </div>
    {{/if}}
  </div>
</template>
